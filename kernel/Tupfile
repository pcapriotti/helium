include_rules

LIBS=../libc/libc.a ../ext2/ext2.a ../core/core.a
LDFLAGS += -e kmain -T kernel.ld

: foreach *.S |> !as |> | $(KERNEL_ROOT)/<objs>
: foreach *.c |> !cc |> | $(KERNEL_ROOT)/<objs>
: $(LIBS) | <objs> |> ^ LD %o^ $(LD) $(LDFLAGS) %<objs> %f -o %o |> kernel.elf
