include_rules
CC=$HOME/.local/opt/cross/bin/$(TARGET)-gcc
LD=$HOME/.local/opt/cross/bin/$(TARGET)-ld

LIBS=libc/libc.a buddy/buddy.a

: src/*.o $(LIBS) |> $(LD) $(LDFLAGS) -T boot.ld %f -o %o |> demo.elf
: demo.elf |> objcopy -O binary -j .text0 -j .text -j .data %f %o |> %B.bin
: demo.bin |> ./scripts/build-floppy-image.sh %f %o |> fda
